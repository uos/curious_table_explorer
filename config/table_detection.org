source1:
  type: RosKinect
  module: object_recognition_ros.io
  parameters:
    rgb_frame_id: /kinect_rgb_optical_frame
    rgb_image_topic: /kinect/rgb/image_color
    rgb_camera_info: /kinect/rgb/camera_info
    depth_image_topic: /kinect/depth_registered/image_raw
    depth_camera_info: /kinect/depth_registered/camera_info

sink1:
  type: TablePublisher
  module: object_recognition_tabletop
  # this input forwards the image_message tendril to TablePublisher
  inputs: [source1]

# this useless sink is needed because RecognitionServer
# waits for /recognized_objecs_array to be published and doesn't
# terminate the action otherwise. Publisher sends an empty message there
sink2:
  type: Publisher
  module: object_recognition_ros.io
  inputs: [source1]

pipeline1:
  type: TabletopTableDetector
  module: object_recognition_tabletop
  inputs: [source1]
  outputs: [sink1]
  parameters:
    vertical_frame_id: /map
    table_detector:
      min_table_size: 50
      plane_threshold: 0.04
    clusterer:
      table_z_filter_max: 0.35
      table_z_filter_min: 0.025
